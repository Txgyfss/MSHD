{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/utils/request\";\nexport default {\n  data() {\n    let goodsId = this.$route.query.id;\n    return {\n      user: JSON.parse(localStorage.getItem(\"user\") || {}),\n      goods: {},\n      goodsId: goodsId,\n      buyNum: 1,\n      comments: [],\n      addressList: [],\n      dialogVisible: false,\n      num: 1,\n      content: '',\n      addressId: null,\n      carousel_1_1: [require(\"@/assets/imgs/jingxi.png\")]\n    };\n  },\n  mounted() {\n    this.load();\n    this.loadComment();\n    this.loadAddress();\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    load() {\n      request.get('/goods/' + this.goodsId).then(res => {\n        this.goods = res.data;\n      });\n    },\n    loadComment() {\n      request.get(\"/comment/\" + this.goodsId).then(res => {\n        if (res.code === '0') {\n          this.comments = res.data;\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    loadAddress() {\n      request.get(\"/address\").then(res => {\n        if (res.code === '0') {\n          this.addressList = res.data;\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    buy() {\n      this.dialogVisible = true;\n    },\n    save() {\n      if (!this.user && !this.user.username) {\n        this.$notify.error(\"登录失效，请重新登陆\");\n        this.$router.push(\"/login\");\n        return;\n      }\n      if (this.user.role === 1) {\n        this.$notify.warning(\"您是管理员，不支持该操作\");\n        return;\n      }\n      if (!this.addressId) {\n        this.$notify.warning(\"请选择收货地址,如没有地址，请到地址管理设置地址\");\n        return;\n      }\n      this.goods.userId = this.user.id;\n      this.goods.goodsId = this.goods.id;\n      this.goods.addressId = this.addressId;\n      this.goods.num = this.num;\n      this.goods.id = null;\n      request.post(\"/order/buy/one\", this.goods).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"购买成功\");\n          this.$router.push(\"/front/order\");\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    addCart() {\n      if (!this.user && !this.user.username) {\n        this.$notify.error(\"登录失效，请重新登陆\");\n        this.$router.push(\"/login\");\n        return;\n      }\n      if (this.user.role === 1) {\n        this.$notify.warning(\"您是管理员，不支持该操作\");\n        return;\n      }\n      let data = {\n        userId: this.user.id,\n        goodsId: this.goods.id,\n        num: this.num\n      };\n      request.post(\"/cart\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"加入成功\");\n          this.$router.push(\"/front/cart\");\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    submit(parentId, content) {\n      if (!content) {\n        this.$notify.warning(\"请输入内容\");\n      }\n      let data = {\n        content: content,\n        userId: this.user.id,\n        role: this.user.role,\n        parentId: parentId,\n        relId: this.goodsId\n      };\n      request.post(\"/comment\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"评论成功\");\n          this.loadComment();\n          this.content = \"\";\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","data","goodsId","$route","query","id","user","JSON","parse","localStorage","getItem","goods","buyNum","comments","addressList","dialogVisible","num","content","addressId","carousel_1_1","require","mounted","load","loadComment","loadAddress","methods","get","then","res","code","$notify","error","msg","buy","save","username","$router","push","role","warning","userId","post","success","addCart","submit","parentId","relId"],"sources":["src/views/front/Detail.vue"],"sourcesContent":["<template>\n  <div class=\"detail-background\"\n       style=\"background:rgba(255,208,0,0.1)\">\n  <div class=\"detail-container\" style=\"background: rgba(255,255,255,0.62); width:80%\">\n    <div class=\"detail-title\" style=\"color:#1f57af; font-weight: bold; font-size:20px\">详情信息</div>\n    <div class=\"detail-content\" style=\"margin-left: 80px\">\n      <div class=\"detail-left-img-fields\">\n        <div style=\"flex: 1;\"><img :src=\"goods.img\" style=\"width: 100%; height: 440px; margin-top: 10px; border-radius: 5px; border: #e3e3e3 solid 1px\"></div>\n        <div style=\"flex: 2; margin-left: 180px\">\n          <div class=\"detail-fields-item overflowShow\" style=\"font-size: 18px;color:#163e7c;font-weight: 550;\">{{goods.name}}</div>\n          <div class=\"detail-fields-item overflowShow\" style=\"font-size: 18px;color:#000000;font-weight: 550;background:linear-gradient(to right, #ffb147, rgb(255,243,22));;color:white;width: 500px;height: 100px;\n          text-align: left;line-height: 100px;padding: 0 20px\">\n            <div style=\"width: 500px;height: 100px;display:flex;text-align: left;align-items: center;\">\n              <span style=\"font-size: 20px\">￥</span>\n              <span style=\"font-size: 40px\">{{goods.price}}</span>\n              <span style=\"font-size: 20px;margin-left: 10px;font-weight: lighter;text-decoration: line-through\">￥{{goods.originalprice}}</span>\n              <img :src=\"carousel_1_1\"  alt=\"\" style=\"width: 140px;margin-left: 150px;\">\n            </div>\n          </div>\n          <div class=\"detail-fields-item overflowShow\">\n            <span style=\"font-size: 14px;color: #8c8a8a; margin-right: 10px; font-weight: bold\">商品地区</span>\n            <span style=\"font-size: 15px;color: rgba(7,7,108,0.8); font-weight: bold\">{{goods.location}}</span>\n          </div>\n          <div class=\"detail-fields-item overflowShow\">\n            <span style=\"font-size: 14px;color: #8c8a8a; margin-right: 10px; font-weight: bold\">商品型号</span>\n            <span style=\"font-size: 15px;color: rgba(7,7,108,0.8); font-weight: bold\">{{goods.goodsmodel}}</span>\n          </div>\n          <div class=\"detail-fields-item overflowShow\">\n            <span style=\"font-size: 14px;color: #8c8a8a; margin-right: 10px; font-weight: bold\">商品运费</span>\n            <span style=\"font-size: 15px;color: rgba(7,7,108,0.8); font-weight: bold\">新用户专享首单满38元免邮（部分商品不可用）</span>\n          </div>\n          <div class=\"detail-fields-item overflowShow\">\n            <span style=\"font-size: 14px;color: #8c8a8a;  margin-right: 10px; font-weight: bold\">购买数量</span>\n            <el-input-number :value=\"1\" size=\"small\" style=\"width: 100px;\" v-model=\"num\"></el-input-number>\n          </div>\n          <div class=\"detail-fields-item overflowShow\" style=\"margin-top: 50px\">\n            <el-button style=\"width: 200px;height: 60px;background-color: #ffd000;color: white;margin-left: 40px;border:none;border-radius: 2%;\" @click=\"addCart\">\n              <span style=\"font-size:16px; font-weight:bold\">加入购物车</span>\n            </el-button>\n            <el-button style=\"width: 200px;height: 60px;background-color: #1673ff;color: white;margin-left: 40px; border:none;border-radius: 2%;;\" @click=\"buy\">\n              <span style=\"font-size:16px; font-weight:bold\">支付</span>\n            </el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n      <!--   富文本详情页部分   -->\n      <div class=\"detail-richtext\">\n        <div class=\"detail-richtext-title\">{{goods.name}}</div>\n        <div class=\"detail-richtext-content w-e-text\" v-html=\"goods.description\"></div>\n      </div>\n    </div>\n    <div class=\"detail-title\">评论信息</div>\n    <div class=\"detail-comment\">\n      <div>\n        <el-row v-for=\"item in comments\" style=\"margin-bottom: 10px\">\n          <el-col :span=\"4\" style=\"display: flex; align-items: center;\">\n            <img :src=\"item.avatar\" style=\"width: 50px; height: 50px; border-radius: 50%;\">\n            <div style=\"margin-left: 10px; flex: 1\" class=\"overflowShow\">{{item.userName}}</div>\n          </el-col>\n          <el-col :span=\"20\">\n            <el-row>\n              <el-col :span=\"20\" style=\"height: 50px; line-height: 50px\">{{item.content}}</el-col>\n              <el-col :span=\"4\" style=\"height: 50px; line-height: 50px; text-align: right\">{{item.time}}</el-col>\n            </el-row>\n            <el-row :span=\"3\" style=\"margin-top: 20px\" v-for=\"child in item.children\">\n              <el-col :span=\"4\" style=\"display: flex; align-items: center;\">\n                <img :src=\"child.avatar\" style=\"width: 50px; height: 50px; border-radius: 50%;\">\n                <div style=\"margin-left: 10px; flex: 1\" class=\"overflowShow\">{{child.userName}} 回复：</div>\n              </el-col>\n              <el-col :span=\"16\" style=\"height: 50px; line-height: 50px\">{{child.content}}</el-col>\n              <el-col :span=\"4\" style=\"height: 50px; line-height: 50px; text-align: right\">{{child.time}}</el-col>\n            </el-row>\n\n            <el-row :span=\"3\" style=\"margin-top: 20px\">\n              <el-col :span=\"15\">\n                <el-input v-model=\"item.reply\"></el-input>\n              </el-col>\n              <el-col :span=\"4\" style=\"margin-left: 10px\">\n                <el-button type=\"primary\" @click=\"submit(item.id, item.reply)\">回复</el-button>\n              </el-col>\n            </el-row>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n    <el-dialog title=\"请选择收货地址\" :visible.sync=\"dialogVisible\" width=\"40%\">\n      <el-form :model=\"goods\" label-position=\"right\" label-width=\"100px\" style=\"padding-right: 40px\">\n        <el-form-item>\n          <span style=\"font-size: 12px;color: #8c8a8a;  margin-right: 10px\">收货人</span>\n          <el-select size=\"small\" style=\"width: 80%\" placeholder=\"请选择收货人\" v-model=\"addressId\">\n            <el-option v-for=\"item in addressList\" :value=\"item.id\" :label=\"item.username\" :key=\"item.id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <span style=\"font-size: 12px;color: #8c8a8a;  margin-right: 10px\">配送地址</span>\n          <el-select size=\"small\" style=\"width: 80%\" placeholder=\"请选择收货地址\" v-model=\"addressId\">\n            <el-option v-for=\"item in addressList\" :value=\"item.id\" :label=\"item.address\" :key=\"item.id\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button size=\"small\"  @click=\"save\" style=\"background-color: #1673ff; color: white;\">支 付</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n\n  data() {\n    let goodsId = this.$route.query.id\n    return {\n      user: JSON.parse(localStorage.getItem(\"user\") || {}),\n      goods: {},\n      goodsId: goodsId,\n      buyNum: 1,\n      comments: [],\n      addressList: [],\n      dialogVisible: false,\n      num: 1,\n      content: '',\n      addressId: null,\n      carousel_1_1: [\n          require(\"@/assets/imgs/jingxi.png\")\n      ],\n\n    }\n  },\n  mounted() {\n    this.load()\n    this.loadComment()\n    this.loadAddress()\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    load() {\n      request.get('/goods/' + this.goodsId).then(res => {\n        this.goods = res.data\n      })\n    },\n    loadComment() {\n      request.get(\"/comment/\" + this.goodsId).then(res => {\n        if (res.code === '0') {\n          this.comments = res.data\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    loadAddress(){\n      request.get(\"/address\").then(res => {\n        if (res.code === '0') {\n          this.addressList = res.data\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    buy() {\n      this.dialogVisible = true;\n    },\n    save() {\n      if (!this.user && !this.user.username) {\n        this.$notify.error(\"登录失效，请重新登陆\")\n        this.$router.push(\"/login\")\n        return;\n      }\n      if (this.user.role === 1) {\n        this.$notify.warning(\"您是管理员，不支持该操作\")\n        return;\n      }\n      if (!this.addressId) {\n        this.$notify.warning(\"请选择收货地址,如没有地址，请到地址管理设置地址\")\n        return\n      }\n      this.goods.userId = this.user.id;\n      this.goods.goodsId = this.goods.id;\n      this.goods.addressId = this.addressId;\n      this.goods.num = this.num;\n      this.goods.id = null;\n      request.post(\"/order/buy/one\", this.goods).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"购买成功\")\n          this.$router.push(\"/front/order\")\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    addCart() {\n      if (!this.user && !this.user.username) {\n        this.$notify.error(\"登录失效，请重新登陆\")\n        this.$router.push(\"/login\")\n        return;\n      }\n      if (this.user.role === 1) {\n        this.$notify.warning(\"您是管理员，不支持该操作\")\n        return;\n      }\n      let data = {\n        userId: this.user.id,\n        goodsId: this.goods.id,\n        num: this.num,\n      }\n      request.post(\"/cart\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"加入成功\")\n          this.$router.push(\"/front/cart\")\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    submit(parentId, content) {\n      if (!content) {\n        this.$notify.warning(\"请输入内容\")\n      }\n      let data = {content: content, userId: this.user.id, role: this.user.role, parentId: parentId, relId: this.goodsId}\n      request.post(\"/comment\", data).then(res => {\n        if (res.code ==='0') {\n          this.$notify.success(\"评论成功\")\n          this.loadComment()\n          this.content = \"\"\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    }\n  }\n}\n</script>\n"],"mappings":";AA+GA,OAAAA,OAAA;AAEA;EAEAC,KAAA;IACA,IAAAC,OAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,EAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,KAAA;MACAT,OAAA,EAAAA,OAAA;MACAU,MAAA;MACAC,QAAA;MACAC,WAAA;MACAC,aAAA;MACAC,GAAA;MACAC,OAAA;MACAC,SAAA;MACAC,YAAA,GACAC,OAAA;IAGA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;IACA,KAAAC,WAAA;IACA,KAAAC,WAAA;EACA;EACA;EACAC,OAAA;IACAH,KAAA;MACAtB,OAAA,CAAA0B,GAAA,kBAAAxB,OAAA,EAAAyB,IAAA,CAAAC,GAAA;QACA,KAAAjB,KAAA,GAAAiB,GAAA,CAAA3B,IAAA;MACA;IACA;IACAsB,YAAA;MACAvB,OAAA,CAAA0B,GAAA,oBAAAxB,OAAA,EAAAyB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAhB,QAAA,GAAAe,GAAA,CAAA3B,IAAA;QACA;UACA,KAAA6B,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAR,YAAA;MACAxB,OAAA,CAAA0B,GAAA,aAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAf,WAAA,GAAAc,GAAA,CAAA3B,IAAA;QACA;UACA,KAAA6B,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAC,IAAA;MACA,KAAAlB,aAAA;IACA;IACAmB,KAAA;MACA,UAAA5B,IAAA,UAAAA,IAAA,CAAA6B,QAAA;QACA,KAAAL,OAAA,CAAAC,KAAA;QACA,KAAAK,OAAA,CAAAC,IAAA;QACA;MACA;MACA,SAAA/B,IAAA,CAAAgC,IAAA;QACA,KAAAR,OAAA,CAAAS,OAAA;QACA;MACA;MACA,UAAArB,SAAA;QACA,KAAAY,OAAA,CAAAS,OAAA;QACA;MACA;MACA,KAAA5B,KAAA,CAAA6B,MAAA,QAAAlC,IAAA,CAAAD,EAAA;MACA,KAAAM,KAAA,CAAAT,OAAA,QAAAS,KAAA,CAAAN,EAAA;MACA,KAAAM,KAAA,CAAAO,SAAA,QAAAA,SAAA;MACA,KAAAP,KAAA,CAAAK,GAAA,QAAAA,GAAA;MACA,KAAAL,KAAA,CAAAN,EAAA;MACAL,OAAA,CAAAyC,IAAA,wBAAA9B,KAAA,EAAAgB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAY,OAAA;UACA,KAAAN,OAAA,CAAAC,IAAA;QACA;UACA,KAAAP,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAW,QAAA;MACA,UAAArC,IAAA,UAAAA,IAAA,CAAA6B,QAAA;QACA,KAAAL,OAAA,CAAAC,KAAA;QACA,KAAAK,OAAA,CAAAC,IAAA;QACA;MACA;MACA,SAAA/B,IAAA,CAAAgC,IAAA;QACA,KAAAR,OAAA,CAAAS,OAAA;QACA;MACA;MACA,IAAAtC,IAAA;QACAuC,MAAA,OAAAlC,IAAA,CAAAD,EAAA;QACAH,OAAA,OAAAS,KAAA,CAAAN,EAAA;QACAW,GAAA,OAAAA;MACA;MACAhB,OAAA,CAAAyC,IAAA,UAAAxC,IAAA,EAAA0B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAY,OAAA;UACA,KAAAN,OAAA,CAAAC,IAAA;QACA;UACA,KAAAP,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAY,OAAAC,QAAA,EAAA5B,OAAA;MACA,KAAAA,OAAA;QACA,KAAAa,OAAA,CAAAS,OAAA;MACA;MACA,IAAAtC,IAAA;QAAAgB,OAAA,EAAAA,OAAA;QAAAuB,MAAA,OAAAlC,IAAA,CAAAD,EAAA;QAAAiC,IAAA,OAAAhC,IAAA,CAAAgC,IAAA;QAAAO,QAAA,EAAAA,QAAA;QAAAC,KAAA,OAAA5C;MAAA;MACAF,OAAA,CAAAyC,IAAA,aAAAxC,IAAA,EAAA0B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAY,OAAA;UACA,KAAAnB,WAAA;UACA,KAAAN,OAAA;QACA;UACA,KAAAa,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}